---
layout: post
title: "rubyで手軽に暗号化文字列やハッシュ値を生成"
---
こんにちは django派閥とrails派閥の争いが激しい最近のウノウです。ちなみに若干railsが優勢です。<br />
<br />
<pre class="code"><br />
require 'openssl'<br />
def encrypt(aaa, solt = 'solt')<br />
  enc = OpenSSL::Cipher::Cipher.new('aes256')<br />
  enc.encrypt<br />
  enc.pkcs5_keyivgen(solt)<br />
  ((enc.update(aaa) + enc.final).unpack("H*")).to_s<br />
  rescue<br />
    false<br />
end<br />
def decrypt(bbb, solt = 'solt')<br />
  dec = OpenSSL::Cipher::Cipher.new('aes256') <br />
  dec.decrypt <br />
  dec.pkcs5_keyivgen(solt)<br />
  (dec.update(Array.new([bbb]).pack("H*")) + dec.final)<br />
  rescue  <br />
    false <br />
end <br />
def hash(ccc)<br />
    OpenSSL::Digest::SHA1.new(ccc)<br />
end <br />
    <br />
secret = "himitsu"<br />
solt   = "unoh"<br />
enc = encrypt(secret, solt) <br />
p enc <br />
dec = decrypt(enc, solt)<br />
p dec <br />
p hash(secret)<br />
<br />
#--<br />
#"2906e1eca22b8b74ab2a14cbf185185c"<br />
#"himitsu"<br />
#c44ade485240212403b41eba503fcb222d190cd0<br />
</pre><br />
<br />
便利ですね。<br />
http://www.ruby-lang.org/ja/man/?cmd=view;name=openssl<br />
http://www.ruby-lang.org/ja/man/?cmd=view;name=OpenSSL%3A%3ACipher%3A%3ACipher<br />

